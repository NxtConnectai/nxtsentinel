# ============================================================================
# NXT Sentinel Marketing Website - Firebase Hosting Deployment
# ============================================================================
# This workflow automatically deploys the marketing website to Firebase Hosting
# when manually triggered OR when secrets are configured.
#
# Required GitHub Secrets:
#   - FIREBASE_SERVICE_ACCOUNT: Service account JSON for Firebase deployment
#   - FIREBASE_PROJECT_ID: nxtsentinel-8e0cd
#
# Setup Instructions:
#   1. Go to Firebase Console > Project Settings > Service Accounts
#   2. Click "Generate new private key"
#   3. Copy the entire JSON content
#   4. Go to GitHub repo > Settings > Secrets > Actions
#   5. Create new secret named FIREBASE_SERVICE_ACCOUNT
#   6. Paste the JSON content as the value
#   7. Create FIREBASE_PROJECT_ID secret with value: nxtsentinel-8e0cd
# ============================================================================

name: Deploy to Firebase Hosting

on:
  # Manual trigger only until secrets are configured
  workflow_dispatch:
  # Uncomment below after adding secrets:
  # push:
  #   branches:
  #     - main
  # pull_request:
  #   branches:
  #     - main

jobs:
  build_and_deploy:
    runs-on: ubuntu-latest
    
    steps:
      # Step 1: Checkout the repository
      - name: Checkout repository
        uses: actions/checkout@v4

      # Step 2: Deploy to Firebase Hosting (Production)
      - name: Deploy to Firebase Hosting (Production)
        uses: FirebaseExtended/action-hosting-deploy@v0
        with:
          repoToken: \${{ secrets.GITHUB_TOKEN }}
          firebaseServiceAccount: \${{ secrets.FIREBASE_SERVICE_ACCOUNT }}
          channelId: live
          projectId: \${{ secrets.FIREBASE_PROJECT_ID }}
